## 华能拾音器ros包  pickup_pkg

https://codeup.aliyun.com//huaneng_chassis.git   


### 1. 功能目标
这个包是华能拾音器，可将本地音频数据传输至海康摄像头，并通过喇叭播放音频，可选择播放音频文件以及终止播放音频
拾音器型号为DS-2FP4061-B
海康摄像头型号为IDS-2ZCN2507N

### 2. 程序环境

ubuntu 18.04 + ros-melodic



### 3. 模块说明
#### 3.1 文件组织说明
c++ 文件在 src 文件夹中   

1， src 文件夹  
demo.cpp          初始化海康威视摄像头，配置ip地址，在海康获取音频的函数回调里发送音频文件
get_voice.cpp     获取需要发送的音频文件，运行文件时需要配置好音频文件的地址


2，lib文件夹  
海康sdk的动态链接库


3，scripts文件夹  
key.py       测试文件，通过按键控制播放和暂停音频传输

4，voice文件夹  
存放需要传输的音频文件（必须为ulaw g711编码格式）

  
5，doc文件夹  
拾音器文档以及海康SDK文档 

#### 3.2 程序逻辑说明

注册话题订阅函数，等待话题，需要传输音频时再登录海康的摄像头，并在音频回调函数里开始传输，结束播放或终止播放注销海康摄像头的登录，并等待下一次开始传输的话题；
当订阅到开始播放的话题，登录摄像头后，在音频回调函数fVoiceDataCallBack里调用get_voice.cpp里的Get_Voice函数读取音频文件

### 4 使用说明

启动hk_trans节点

话题为/voice，数据类型为std_msgs::UInt8  
停止播放：'0'  
播放音频文件：'1'~'4'  

ip地址配置：192.168.4.164  
用户名：admin  
密码：tmzx2022  

### 5 TODO  

1 待完善的地方

### 6 测试记录  



### 开发人员  

周熙栋
